---
name: review-code
description: 現在のブランチの変更（親ブランチとの差分）をセルフレビューするためのチェックリスト。コミット前に品質、正確性、セキュリティを確認。
---

# Review Code Skill

現在のブランチの変更（親ブランチとの差分）をコミットする前にセルフレビューするためのチェックリスト。

対象: $ARGUMENTS

---

## 言語・フレームワーク固有のチェック項目

レビュー対象のコードから言語やフレームワークを検知した場合、`references/` 配下の該当ファイルも参照すること。

| 検知条件 | 参照ファイル |
|---------|-------------|
| Java + Spring Boot (`@SpringBootApplication`, `pom.xml` with spring-boot, `build.gradle` with spring-boot) | `references/java-spring-boot.md` |
| JavaScript (`.js`, `.mjs`, `.cjs`) | `references/javascript.md` |
| TypeScript (`.ts`, `.tsx`) | `references/typescript.md` + `references/javascript.md` |
| HTML (`.html`, `.htm`) | `references/html.md` |

※ 複数の言語/フレームワークが検知された場合は、該当するすべての参照ファイルを確認すること。
※ 該当するファイルが存在しない場合は、共通チェック項目のみでレビューを行う。

---

## 共通チェック項目

### 1. 命名と可読性

#### 命名
- [ ] 変数名が意図を明確に表している
- [ ] 関数名が動作を正確に表している
- [ ] 略語を避け、検索可能な名前を使用
- [ ] bool値は `is`, `has`, `can`, `should` などで始まる
- [ ] 一貫した命名規則（言語の慣習に従う）

#### 可読性
- [ ] コードが自己文書化されている
- [ ] 複雑なロジックには適切なコメントがある
- [ ] ネストが深すぎない（3段階以内が目安）
- [ ] 1行が長すぎない
- [ ] 空白や改行が適切に使われている

### 2. 関数・構造

#### 関数設計
- [ ] 関数が単一責任を持っている
- [ ] 関数が短く保たれている（目安: 20-30行以内）
- [ ] 引数の数が多すぎない（目安: 3-4個以内）
- [ ] 副作用が明確または最小限
- [ ] 早期リターンでネストを減らしている

#### コード構造
- [ ] DRY原則 - 重複コードがない
- [ ] 適切な抽象化レベル
- [ ] 関連するコードがまとまっている
- [ ] 不要なコードが残っていない（デッドコード）

### 3. ロジック・正確性

#### エッジケース
- [ ] null / undefined / None の処理
- [ ] 空配列・空文字列の処理
- [ ] 境界値の処理（0, 負数, 最大値）
- [ ] 型変換の安全性

#### エラーハンドリング
- [ ] 例外が適切にキャッチされている
- [ ] エラーメッセージが有用
- [ ] 失敗時の状態が一貫している
- [ ] リソースが適切に解放される

#### ロジック
- [ ] オフバイワンエラーがない
- [ ] ループの終了条件が正しい
- [ ] 条件分岐の漏れがない
- [ ] 非同期処理が適切にハンドリングされている

### 4. パフォーマンス

- [ ] 不要なループや計算がない
- [ ] N+1問題がない（DB/APIアクセス）
- [ ] 適切なデータ構造を使用
- [ ] メモリリークの可能性がない
- [ ] 大量データ処理時の考慮

### 5. セキュリティ

- [ ] ユーザー入力のバリデーション
- [ ] SQLインジェクション対策
- [ ] XSS対策
- [ ] 機密情報がハードコードされていない
- [ ] 適切な認証・認可チェック
- [ ] ログに機密情報を出力していない

### 6. 一貫性

- [ ] 既存のコードパターンに従っている
- [ ] プロジェクトの規約に準拠
- [ ] インポート順序が統一されている
- [ ] フォーマットが統一されている

### 7. テスト

- [ ] 変更に対するテストがある
- [ ] エッジケースがテストされている
- [ ] テストが読みやすく保守しやすい
- [ ] モックが適切に使われている

### 8. 副作用・影響範囲

- [ ] 既存機能への影響がない
- [ ] 後方互換性が保たれている
- [ ] 依存関係の変更が適切
- [ ] 設定やスキーマの変更が文書化されている

---

## レビューの優先度

1. **Critical（修正必須）**: バグ、セキュリティ問題、データ損失の可能性
2. **Warning（修正推奨）**: パフォーマンス問題、保守性の低下、ベストプラクティス違反
3. **Info（提案）**: より良い方法の提案、コードスタイル、軽微な改善
