---
name: tdd-workflow
description: æ–°æ©Ÿèƒ½å®Ÿè£…ã‚„ãƒã‚°ä¿®æ­£æ™‚ã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ç¢ºå®Ÿã«ã™ã‚‹ãŸã‚ã®ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¬ã‚¤ãƒ‰ã€‚
allowed-tools: Read, Write, Edit, Bash
---

# TDDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®æ¨™æº–ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æä¾›ã—ã¾ã™ã€‚

## ğŸ”„ TDDã‚µã‚¤ã‚¯ãƒ«

### 1. RED - ãƒ†ã‚¹ãƒˆã‚’æ›¸ãï¼ˆå¤±æ•—ã•ã›ã‚‹ï¼‰
```typescript
// âœ… è‰¯ã„ä¾‹: æ˜ç¢ºã§å…·ä½“çš„
describe('UserService', () => {
  describe('createUser', () => {
    it('ãƒãƒƒã‚·ãƒ¥åŒ–ã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹', async () => {
      const input = { email: 'test@example.com', password: 'password123' }
      const user = await userService.createUser(input)
      
      expect(user.email).toBe(input.email)
      expect(user.password).not.toBe(input.password) // ãƒãƒƒã‚·ãƒ¥åŒ–ç¢ºèª
      expect(user.id).toBeDefined()
    })
    
    it('é‡è¤‡ã—ãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å ´åˆã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼ã™ã‚‹', async () => {
      await userService.createUser({ email: 'test@example.com', password: 'pass' })
      
      await expect(
        userService.createUser({ email: 'test@example.com', password: 'pass' })
      ).rejects.toThrow('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™')
    })
  })
})
```

### 2. GREEN - å®Ÿè£…ã™ã‚‹ï¼ˆãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã•ã›ã‚‹ï¼‰
æœ€å°é™ã®ã‚³ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¹ã•ã›ã¾ã™ã€‚

### 3. REFACTOR - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã—ãŸçŠ¶æ…‹ã§ã€ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚

## ğŸ“‹ ãƒ†ã‚¹ãƒˆæ§‹é€ 

### AAAãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
it('ä½•ã‹ã‚’ã™ã‚‹', () => {
  // Arrangeï¼ˆæº–å‚™ï¼‰
  const input = ...
  const expected = ...
  
  // Actï¼ˆå®Ÿè¡Œï¼‰
  const result = someFunction(input)
  
  // Assertï¼ˆæ¤œè¨¼ï¼‰
  expect(result).toBe(expected)
})
```

## ğŸ¯ ãƒ†ã‚¹ãƒˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### âœ… ã™ã¹ãã“ã¨
- ãƒ†ã‚¹ãƒˆåã¯ã€Œã€œã™ã‚‹ã€ã€Œã€œã™ã¹ãã€å½¢å¼
- 1ãƒ†ã‚¹ãƒˆ = 1ã¤ã®é–¢å¿ƒäº‹
- Given-When-Thenå½¢å¼ã§è€ƒãˆã‚‹
- ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã‚’ãƒ†ã‚¹ãƒˆ
- ãƒ¢ãƒƒã‚¯ã¯æœ€å°é™ã«

### âŒ ã™ã¹ãã§ãªã„ã“ã¨
- å®Ÿè£…ã®è©³ç´°ã‚’ãƒ†ã‚¹ãƒˆã—ãªã„
- è¤‡æ•°ã®é–¢å¿ƒäº‹ã‚’1ãƒ†ã‚¹ãƒˆã«å«ã‚ãªã„
- å¤–éƒ¨APIã«ä¾å­˜ã—ãªã„
- ãƒ©ãƒ³ãƒ€ãƒ å€¤ã‚’ä½¿ã‚ãªã„

## ğŸ› ï¸ ã‚³ãƒãƒ³ãƒ‰

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test

# Watchãƒ¢ãƒ¼ãƒ‰
npm test -- --watch

# ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª
npm run test:coverage

# ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿
npm test -- path/to/test.spec.ts
```

## ğŸ“Š ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™
- ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸: > 80%
- ãƒ–ãƒ©ãƒ³ãƒã‚«ãƒãƒ¬ãƒƒã‚¸: > 75%
- é–¢æ•°ã‚«ãƒãƒ¬ãƒƒã‚¸: > 80%
- è¡Œã‚«ãƒãƒ¬ãƒƒã‚¸: > 80%

## ğŸ” ä¾‹: å®Œå…¨ãªTDDãƒ•ãƒ­ãƒ¼

### ã‚¹ãƒ†ãƒƒãƒ—1: è¦ä»¶ç†è§£
ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹æ©Ÿèƒ½ã€‚ãƒ¡ãƒ¼ãƒ«ã¯ä¸€æ„ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ãƒãƒƒã‚·ãƒ¥åŒ–ã€

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ†ã‚¹ãƒˆä½œæˆï¼ˆREDï¼‰
```typescript
it('ãƒãƒƒã‚·ãƒ¥åŒ–ã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹', async () => {
  // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
})
```

### ã‚¹ãƒ†ãƒƒãƒ—3: å®Ÿè¡Œ â†’ å¤±æ•—ç¢ºèª
```bash
npm test
# FAIL: createUserãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“
```

### ã‚¹ãƒ†ãƒƒãƒ—4: æœ€å°å®Ÿè£…ï¼ˆGREENï¼‰
```typescript
async createUser(data: CreateUserDto) {
  const hashedPassword = await bcrypt.hash(data.password, 12)
  return this.userRepository.save({
    ...data,
    password: hashedPassword
  })
}
```

### ã‚¹ãƒ†ãƒƒãƒ—5: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ â†’ æˆåŠŸ
```bash
npm test
# PASS: ãƒãƒƒã‚·ãƒ¥åŒ–ã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹
```

### ã‚¹ãƒ†ãƒƒãƒ—6: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆREFACTORï¼‰
ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡å‰Šé™¤ã€å‘½åæ”¹å–„ãªã©

## ğŸ“š è¿½åŠ ãƒªã‚½ãƒ¼ã‚¹
ã‚ˆã‚Šå¤šãã®ä¾‹ã«ã¤ã„ã¦ã¯ `references/test-patterns.md` ã‚’å‚ç…§