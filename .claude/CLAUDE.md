# User Preferences

## Language
- 内部推論（thinking）は英語で行う
- ユーザーへの応答は日本語
- コミットメッセージは日本語
- コード内のコメントは日本語

## Work Style

### サブエージェントの活用（IMPORTANT）
タスクを実行する前に、利用可能なサブエージェントを確認すること。
該当するサブエージェントがあれば、積極的に活用する。

**サブエージェントを使う前に必ずユーザーに確認すること:**
- 「このタスクは `[サブエージェント名]` に委譲してよいですか？」

**サブエージェントを使うメリット:**
- 専門的な観点で集中してタスクを実行できる
- メインのコンテキストを汚染しない
- 並列で作業を進められる

### 計画フェーズ（IMPORTANT）
複雑なタスクや大きな変更を行う前に:
1. まず計画を立てて、実装前にユーザーに確認を求める
2. 影響範囲が広い場合は、段階的な実装計画を提示する
3. 不明点や複数の選択肢がある場合は、先に質問する

**以下の場合は必ず実装前に確認を求めること:**
- 複数ファイルにまたがる変更
- 既存のアーキテクチャやパターンの変更
- 新しい依存関係の追加
- データベーススキーマの変更
- 削除を伴う変更
- 30分以上かかりそうな作業

### 長時間タスクの進め方
1. タスクを小さなステップに分割する
2. 各ステップ完了後に進捗を報告する
3. 次のステップに進む前に確認を求める
4. 問題が発生したら即座に報告し、判断を仰ぐ

### コードを書く前に
- 関連ファイルを先に読んで既存パターンを理解する
- 変更の影響範囲を確認する
- 既存のユーティリティや共通処理を確認する

### コードを書いた後に
- テストで変更を検証する
- リンター/フォーマッターを実行する
- 変更が他の機能を壊していないか確認する

### フィードバックループ（IMPORTANT）
コードを書いた後、ユーザーに提出する前に自己検証を行う:

1. **1回目**: コードを実行/テストし、エラーがあれば修正
2. **2回目**: 修正後に再度実行/テストし、問題がないか確認
3. **3回目**: コード品質を見直し（可読性、エッジケース、パフォーマンス）

**各ループで確認すること:**
- ビルド/コンパイルが通るか
- テストが通るか
- リンターエラーがないか
- 期待通りに動作するか

最低2〜3回のフィードバックループを自分で回してから、ユーザーに結果を報告すること。
問題が解決しない場合のみ、途中経過を報告して相談する。

## General Rules

### PREFER
- 小さな変更を積み重ねる（大きな変更より）
- 既存のパターンに従う（新しいパターンを導入するより）
- 自己文書化されたコードを書く（コメントより）
- 質問する（推測するより）

### DO NOT
- 機密ファイル（.env、credentials等）を読み取らない
- --forceオプションをgitで使用しない
- 確認なしに大規模な変更を行わない